(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{9581:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preview/public",function(){return s(3439)}])},3439:function(e,a,s){"use strict";s.r(a),s.d(a,{__N_SSP:function(){return N},default:function(){return w}});var n=s(4246),t=s(2640),l=s(9894),r=s.n(l),i=s(7378),d=s(8276),c=s(2756),o=s(7195),x=s(8783),m=s(8480),u=s(752),p=s(6665),h=s(2340),j=s(7124),b=s(3681),f=s(8413),g=function(e){let{id:a}=e,[s,t]=(0,i.useState)("default");return(0,n.jsx)(b.M,{initial:!0,children:(0,n.jsxs)(h.fC,{children:[(0,n.jsx)(h.xz,{className:"btn-primary px-6",children:(0,n.jsx)("span",{children:"طبع"})}),(0,n.jsx)(h.h_,{children:(0,n.jsx)(f.E.div,{children:(0,n.jsx)(h.aV,{className:"bg-primary/25 z-50 fixed inset-0 grid place-items-center",children:(0,n.jsx)(f.E.div,{className:"max-w-lg w-full",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",duration:.5},children:(0,n.jsxs)(h.VY,{className:"bg-base p-6 rounded-md max-w-lg w-full space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(h.Dx,{className:"font-bold text-2xl",children:"طباعة"}),(0,n.jsx)(h.dk,{children:"أختر نوع الفاتورة المارد طبعها"})]}),(0,n.jsx)(h.x8,{children:(0,n.jsx)(u.Z,{className:"w-7 h-7 hover:bg-secondary-hover active:bg-secondary-active rounded-full transition"})})]}),(0,n.jsx)(j.fC,{type:"single",className:"flex gap-2 justify-between",onValueChange(e){e&&t(e)},children:[{en:"expenses",ar:"تفصيلية"},{en:"aggregate",ar:"مجمعية"},{en:"worker",ar:"عمال"}].map(e=>{let a=e.en==s;return(0,n.jsxs)(j.ck,{value:e.en,className:"w-full py-24 border-2 border-secondary group ".concat(a?"border-primary":""," rounded-md relative transition"),children:[e.ar,(0,n.jsx)(b.M,{children:a&&(0,n.jsx)(f.E.div,{className:"absolute right-2 top-2 ",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3,type:"spring"},children:(0,n.jsx)(p.Z,{className:" w-6 h-6 text-primary"})})})]},e.en)})}),(0,n.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,n.jsx)(r(),{href:s?"/preview/public/".concat(s,"?id=").concat(a):"/",href:s?"/preview/public/".concat(s,"?id=").concat(a):"/",children:(0,n.jsx)(h.x8,{className:"btn-primary px-6 h-full",children:"أكمل"})}),(0,n.jsx)(h.x8,{className:"btn-outline px-6",children:"الغاء"})]})]})})})})})]})})},v=s(8788),N=!0,w=function(e){let{billData:a,id:s}=e,{clientName:l,clientAddress:u,name:p,date:h,officePrecentage:j,setClientAddress:b,setDate:f,setClientName:N,setName:w,setOfficePrecentage:y,editBill:k,restState:_,setState:Z}=(0,d.o)(),[C,E]=(0,i.useState)({message:"",error:!1});return(0,i.useEffect)(()=>{let e=a.workers.map(e=>({rowId:(0,v.Z)(),id:e.Worker.id,name:e.Worker.name,work:e.Worker.work,project:{id:a.id,date:e.date,salary:e.amount,precentage:e.precentage}})),s=a.expenses.map(e=>({id:e.id,materialName:e.materialName,date:e.date,totalcost:e.totalcost,day:e.day,section:{id:e.section.id,name:e.section.name}})),n=a.revenues.map(e=>({id:e.id,amount:e.amount,date:e.date})),t=a.sections.map(e=>({id:e.id,name:e.name}));Z({id:a.id,name:a.name,clientName:a.clientName,clientAddress:a.clientAddress,date:a.date,officePrecentage:a.officePrecentage,expenses:s,sections:t,workers:e,revenues:n})},[a]),(0,n.jsxs)("div",{className:"space-y-12",children:[(0,n.jsxs)("header",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,n.jsx)("h1",{className:"text-black font-bold text-3xl",children:"عرض فاتورة عامة"}),(0,n.jsx)("p",{children:"هنا يمكنك عرض فاتورة عامة (فاتورة مشروع)"})]}),(0,n.jsxs)(r(),{href:"/",className:"btn-outline px-6",onClick:_,children:["ألغاء",(0,n.jsx)(t.Z,{className:"w-6 h-6"})]})]}),(0,n.jsx)("main",{className:"",children:(0,n.jsxs)("div",{className:"border-black border p-4 w-full bg-base drop-shadow rounded-md space-y-6 relative ",children:[(0,n.jsxs)("div",{className:"flex gap-4 w-full",children:[(0,n.jsx)(c.Z,{disabled:!0,onChange:e=>N(e.target.value),value:l,label:"أسم العميل",type:"text"}),(0,n.jsx)(c.Z,{disabled:!0,value:u,label:"عنوان العميل",type:"text",onChange:e=>b(e.target.value)}),(0,n.jsx)(c.Z,{disabled:!0,value:p,label:"أسم المشروع",type:"text",onChange:e=>w(e.target.value)}),(0,n.jsx)(c.Z,{disabled:!0,value:j,label:"نسبة المكتب",type:"number",onChange:e=>y(e.target.value)}),(0,n.jsx)(c.Z,{disabled:!0,value:h,label:"التاريخ",type:"date",onChange:e=>f(e.target.value)})]}),(0,n.jsx)(o.Z,{readOnly:!0}),(0,n.jsx)(x.Z,{readOnly:!0}),(0,n.jsx)(m.Z,{readOnly:!0}),(0,n.jsx)("div",{}),(0,n.jsxs)("div",{className:"bg-secondary flex items-center gap-4 p-4 absolute rounded-b-md -inset-x-[1px] -bottom-16 drop-shadow-md border-black border",children:[(0,n.jsx)(g,{id:s}),C.message&&(0,n.jsx)("h1",{className:"font-bold text-center text-lg ".concat(C.error?"text-red-600":"text-green-600"),children:C.message})]})]})})]})}}},function(e){e.O(0,[549,639,631,604,469,774,888,179],function(){return e(e.s=9581)}),_N_E=e.O()}]);