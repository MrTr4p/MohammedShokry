(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9536:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4921)}])},4921:function(e,a,s){"use strict";s.r(a),s.d(a,{__N_SSP:function(){return S},default:function(){return L}});var l=s(4246),t=s(4206),i=s.n(t),n=s(3681),r=s(8413),c=s(7378),d=s(7750),o=s(752),x=s(6665),h=s(2340),m=s(7124),p=s(9894),u=s.n(p),b=function(){let[e,a]=(0,c.useState)("public");return(0,l.jsx)(n.M,{initial:!0,children:(0,l.jsxs)(h.fC,{children:[(0,l.jsxs)(h.xz,{className:"btn-primary",children:[(0,l.jsx)("span",{children:"أضف فاتورة جديدة"}),(0,l.jsx)(d.Z,{className:"w-6 h-6"})]}),(0,l.jsx)(h.h_,{children:(0,l.jsx)(r.E.div,{children:(0,l.jsx)(h.aV,{className:"bg-primary/25 z-50 fixed inset-0 grid place-items-center",children:(0,l.jsx)(r.E.div,{className:"max-w-lg w-full",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",duration:.5},children:(0,l.jsxs)(h.VY,{className:"bg-base p-6 rounded-md max-w-lg w-full space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Dx,{className:"font-bold text-2xl",children:"أضافة فاتورة جديدة"}),(0,l.jsx)(h.dk,{children:"أختر نوع الفاتورة"})]}),(0,l.jsx)(h.x8,{children:(0,l.jsx)(o.Z,{className:"w-7 h-7 hover:bg-secondary-hover active:bg-secondary-active rounded-full transition"})})]}),(0,l.jsx)(m.fC,{type:"single",className:"flex gap-2 justify-between",onValueChange(e){e&&a(e)},children:["office","public"].map(a=>{let s=a==e;return(0,l.jsxs)(m.ck,{value:a,className:"w-full py-24 border-2 border-secondary group ".concat(s?"border-primary":""," rounded-md relative transition"),children:["public"==a?"عامة":"خاصة",(0,l.jsx)(n.M,{children:s&&(0,l.jsx)(r.E.div,{className:"absolute right-2 top-2 ",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3,type:"spring"},children:(0,l.jsx)(x.Z,{className:" w-6 h-6 text-primary"})})})]},a)})}),(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)(u(),{href:e?"/create/".concat(e):"/",href:"/create/".concat(e),children:(0,l.jsx)(h.x8,{className:"btn-primary px-6 h-full",children:"أكمل"})}),(0,l.jsx)(h.x8,{className:"btn-outline px-6",children:"الغاء"})]})]})})})})})]})})},f=s(4311),j=s(2873),g=s(301),v=s(602),y=s(8276),N=function(e){let{children:a,onConfirm:s}=e,[t,i]=(0,c.useState)(!1);return(0,l.jsx)(n.M,{initial:!0,children:(0,l.jsxs)(h.fC,{open:t,onOpenChange:i,children:[(0,l.jsx)(h.xz,{children:a}),(0,l.jsx)(h.h_,{children:(0,l.jsx)(r.E.div,{children:(0,l.jsx)(h.aV,{className:"bg-primary/25 z-50 fixed inset-0 grid place-items-center",children:(0,l.jsx)(r.E.div,{className:"max-w-lg w-full",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",duration:.5},children:(0,l.jsxs)(h.VY,{className:"bg-base p-6 rounded-md max-w-lg w-full space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Dx,{className:"font-bold text-2xl",children:"تأكيد عملية الحذف"}),(0,l.jsx)(h.dk,{children:"هل تريد حقا حذف هذه الفاتورة"})]}),(0,l.jsx)(h.x8,{children:(0,l.jsx)(o.Z,{className:"w-7 h-7 hover:bg-secondary-hover active:bg-secondary-active rounded-full transition"})})]}),(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)(h.x8,{onClick:s,className:"btn-primary px-6 h-full",children:"حذف"}),(0,l.jsx)(h.x8,{className:"btn-outline px-6",children:"الغاء"})]})]})})})})})]})})},w=s(6389),k=s.n(w),C=s(9323),_=s(3855),E=function(e,a,s){let{func:t}=e,{type:i}=a;async function n(e){let a=e.selected+1;t(a,1)}return(0,l.jsx)("div",{children:(0,l.jsx)(k(),{previousLabel:(0,l.jsx)("div",{children:(0,l.jsx)(C.Z,{className:"w-8 h-4 my-2"})}),pageCount:s,onPageChange:n,nextLabel:(0,l.jsx)("div",{children:(0,l.jsx)(_.Z,{className:"w-8 h-4 my-2"})}),marginPagesDisplayed:1,containerClassName:" my-3 flex items-center space-x-3 mx-auto",pageClassName:" rounded-2xl text-gray-700 bg-gray-200 rounded-md hover:bg-blue-100 hover:text-white ",pageLinkClassName:" relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-500  focus:shadow-none",previousClassName:"mx-3  font-bold text-black-500 bg-gray-300 rounded-xl hover:bg-blue-400 hover:text-white",previousLinkClassName:"page-link",nextClassName:"font-bold text-black-500 bg-gray-300 rounded-md hover:bg-blue-400 hover:text-white",activeClassName:"bg-blue border-red-300 text-red-500 hover:bg-blue-100 relative inline-flex items-center border text-sm font-medium"})})},B=function(e,a,s){let{func:t}=e,{type:i}=a;async function n(e){let a=e.selected+1;t(1,a)}return(0,l.jsx)("div",{children:(0,l.jsx)(k(),{previousLabel:(0,l.jsx)("div",{children:(0,l.jsx)(C.Z,{className:"w-8 h-4 my-2"})}),pageCount:s,onPageChange:n,nextLabel:(0,l.jsx)("div",{children:(0,l.jsx)(_.Z,{className:"w-8 h-4 my-2"})}),marginPagesDisplayed:1,containerClassName:" my-3 flex items-center space-x-3 mx-auto",pageClassName:" rounded-2xl text-gray-700 bg-gray-200 rounded-md hover:bg-blue-100 hover:text-white ",pageLinkClassName:" relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-500  focus:shadow-none",previousClassName:"mx-3  font-bold text-black-500 bg-gray-300 rounded-xl hover:bg-blue-400 hover:text-white",previousLinkClassName:"page-link",nextClassName:"font-bold text-black-500 bg-gray-300 rounded-md hover:bg-blue-400 hover:text-white",activeClassName:"bg-blue border-red-300 text-red-500 hover:bg-blue-100 relative inline-flex items-center border text-sm font-medium"})})},P=function(e){let{title:a,type:s="public",data:t,page:i,handlePagination:n}=e,r=(0,y.o)(e=>e.user),c=(0,y.o)(e=>e.removeHomePublicBill),d=(0,y.o)(e=>e.removeHomeOfficeBill);async function o(e){"office"===s?d(e):c(e),console.log(s,e)}return(0,l.jsxs)("div",{className:"flex flex-col items-start gap-4 w-full overflow-x-scroll",children:[a&&(0,l.jsx)("h1",{className:"text-black font-bold text-xl",children:a}),(0,l.jsxs)("table",{className:"table-auto w-full border-2 border-secondary rounded-md ",children:[(0,l.jsx)("thead",{className:"bg-secondary",children:(0,l.jsxs)("tr",{className:"",children:[(0,l.jsx)("th",{className:"p-2 text-start whitespace-nowrap",children:"الأعدادات"}),(0,l.jsx)("th",{className:"p-2 text-start whitespace-nowrap",children:"رقم الفاتورة"}),"public"===s&&(0,l.jsx)("th",{className:"p-2 text-start whitespace-nowrap",children:"أسم العميل"}),(0,l.jsx)("th",{className:"p-2 text-start whitespace-nowrap",children:"أسم المشروع"}),(0,l.jsx)("th",{className:"p-2 text-start whitespace-nowrap",children:"التاريخ"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsxs)("tr",{className:" align-middle",children:[(0,l.jsxs)("td",{className:"p-2 flex items-center gap-2 ".concat("edit"===r.accountType?"w-32":"w-8"),children:["edit"===r.accountType&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(N,{onConfirm:()=>o(e.id),children:(0,l.jsx)("div",{className:"transition bg-red-500 border border-black/25 hover:bg-red-400 justify-center text-base active:bg-red-600 drop-shadow rounded-md px-1 py-1",children:(0,l.jsx)(f.Z,{className:"w-6 h-6"})})})}),(0,l.jsx)(u(),{href:"/Edit/".concat(s,"?id=").concat(e.id),children:(0,l.jsx)("a",{href:"/Edit/bill/".concat(s,"?id=").concat(e.id),className:"transition bg-base border border-black/25 hover:bg-secondary-hover justify-center active:bg-secondary-active drop-shadow rounded-md px-1 py-1",children:(0,l.jsx)(j.Z,{className:"w-6 h-6"})})}),(0,l.jsx)(u(),{href:"/preview/".concat(s,"?id=").concat(e.id),children:(0,l.jsx)("a",{href:"/preview/".concat(s,"?id=").concat(e.id),className:"transition bg-base border border-black/25 hover:bg-secondary-hover justify-center active:bg-secondary-active drop-shadow rounded-md px-1 py-1",children:(0,l.jsx)(g.Z,{className:"w-6 h-6"})})})]}),(0,l.jsx)("td",{className:"p-2 ",children:(0,l.jsxs)("span",{children:[e.id,"#"]})}),"public"===s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"p-2 ",children:(0,l.jsx)("span",{children:e.clientName})}),(0,l.jsx)("td",{className:"p-2 ",children:(0,l.jsx)("span",{children:e.name})})]}):(0,l.jsx)("td",{className:"p-2 ",children:(0,l.jsx)("span",{children:e.projectName})}),(0,l.jsx)("td",{className:"p-2 ",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.Z,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:e.date})]})})]},"".concat(e.clientName,"/").concat(e.id)))})]}),(0,l.jsx)("div",{className:"mx-auto",children:"office"===s?(0,l.jsx)(B,{page:i,type:"office",func:n}):(0,l.jsx)(E,{page:i,type:"public",func:n})})]})};let Z=e=>{let{publicBills:a,officeBills:s,PAGE:t}=e;console.log();let d=(0,y.o)(e=>e.homePublicBills),o=(0,y.o)(e=>e.homeOfficeBills),x=(0,y.o)(e=>e.searchState),h=(0,c.useRef)(),m=(0,y.o)(e=>e.setHomePublicBills),p=(0,y.o)(e=>e.setHomeOfficeBills),u=(0,y.o)(e=>e.setSearchState),[f,j]=(0,c.useState)(0);async function g(e){if(e.preventDefault(),"loading"!==x&&(null==h?void 0:h.current)){var a;let s=(null===(a=h.current.value)||void 0===a?void 0:a.trim())||"";if(s){u("loading");let{data:l}=await i()({url:"http://localhost:3000/search/bill?max_results=100&query="+s});l&&(l.projectBills.length>0||l.anotherBills.length>0)?(u("found"),m(l.projectBills),p(l.anotherBills)):u("empty")}else u("empty")}}async function v(e,a){console.log(e),console.log("paga"+a);let{data:s}=await i()({url:"http://localhost:3000/getAll?abpage=".concat(a,"&ablimit=").concat(25,"&bpage=").concat(e,"&blimit=").concat(25)}),{projectBills:l,anotherBills:n}=s;return m(l.data),p(n.data),{props:{PAGE:t,publicBills:l.data,officeBills:n.data}}}return(0,c.useEffect)(()=>{"empty"===x&&(m(a),p(s))},[x]),(0,c.useEffect)(()=>{m(a),p(s)},a,s),(0,l.jsxs)("div",{className:"space-y-12",children:[(0,l.jsxs)("header",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,l.jsx)("h1",{className:"text-black font-bold text-3xl",children:"الفواتير"}),(0,l.jsx)("p",{children:"هنا يوجد جميع الفواتير ويمكن البحث فيهم"})]}),(0,l.jsx)(b,{})]}),(0,l.jsxs)("main",{className:"space-y-6",children:[(0,l.jsx)("form",{action:"",onSubmit:g,children:(0,l.jsx)("input",{ref:h,type:"text",placeholder:"بحث",className:"bg-base drop-shadow-md w-full border border-black/25 rounded-md h-12 px-4 text-black font-medium placeholder:text-black/60 focus:outline-primary "})}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6 relative ".concat("loading"===x&&"select-none pointer-events-none"),children:[(0,l.jsx)(P,{type:"public",title:"الفواتير العامة",data:d,page:t,handlePagination:v}),(0,l.jsx)(P,{type:"office",title:"الفواتير الخاصة",data:o,page:t,handlePagination:v}),(0,l.jsx)(n.M,{children:"loading"===x&&(0,l.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute bg-primary/25 inset-0 -top-2 -right-2 -left-2 overflow-hidden z-40 rounded-md grid justify-center",children:(0,l.jsx)(r.E.div,{initial:{y:300,opacity:0},animate:{y:0,opacity:1},exit:{y:300,opacity:0},children:(0,l.jsxs)("svg",{className:"animate-spin mt-[35vh] h-24 w-24 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})})]})]})]})};var S=!0,L=Z}},function(e){e.O(0,[639,604,588,774,888,179],function(){return e(e.s=9536)}),_N_E=e.O()}]);